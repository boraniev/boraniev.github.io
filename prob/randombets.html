<html>

<head>

<script>

function calculate() {

	var total=0;
	var totalwealth=0;
	var maxwealth=0;
	var totalruin=0;
	var all=[];
	var g=parseFloat(document.getElementById("gain1").value);
	var l=parseFloat(document.getElementById("lost1").value);
	var p=parseFloat(document.getElementById("prob1").value)/100;
	var i=parseFloat(document.getElementById("init1").value);
	var indiv=parseFloat(document.getElementById("individ").value);
	var inter=parseFloat(document.getElementById("interac").value);
	var c;
	var flag;
	var interlos;
	var ruin=0;
	for(countpeople=0;countpeople<indiv;countpeople++){
	one=[];	
		for(count=0;count<=inter;count++) {

			var rr=Math.random();
			if(i<=0) {
				i=0;
				c=i;
				one.push(c);
				
			}else{
				if(rr < p) {
					flag=1;
				} else {
					flag=0;
				}
			interlos=flag*g+(flag-1)*l;
			c=i+interlos;
			i=c;
			ruin=count;
			one.push(c);
			total++;

			}

		document.getElementById("inito").innerHTML = c +" "+count+"  "+ruin+" "+countpeople;
		}

	if(maxwealth<c){maxwealth=c};
	totalwealth=totalwealth+c;
	if(c<=0){ totalruin++;}
	all[countpeople]=c;
	count=0;
	document.getElementById("lista").innerHTML = countpeople;
	var one=[];
	var i=parseFloat(document.getElementById("init1").value);
	}

console.log("total interactions " +total+" Wealth "+totalwealth+" Ruins "+totalruin+" out of "+indiv);
var cost=g*p-l*(1-p);
var average=totalwealth/(indiv-totalruin);
document.getElementById("inito").innerHTML = "Total bets " +total+" out of "+ indiv*inter+". Total Wealth was "+totalwealth+". Number of Ruins (individuals ran out of money before before the series was over) is   "+totalruin+" out of "+indiv+". The cost of the bet was "+ cost+" and  maximum accumulated wealth by an individual was  "+ maxwealth +" while average wealth for all participants was "+average;

}


</script>

</head>


<body>
<div align="center">
<form >
  Initial:
  <input id="init1" type="text"  name="initial" value=100>
  <br>
  Win:
  <input id="gain1" type="text" name="gain" value=1>
  <br>
  Lose:
  <input id="lost1" type="text" name="lost " value=1>
  <br>
  Win Probability :
  <input id="prob1" type="text" name="prob" value=50>
  <br>
  How many individuals:
  <input id="individ" type="text"  name="individ" value=100>
  How many interactions:
  <input id="interac" type="text"  name="interac" value=100>
</form> 
<button onclick="calculate()">Calculate</button>
<p id="inito"> </p> 
<br>
<br>
<p id="lista"> hahahahahahahaha</p>
 <div id="curve_chart" style="width: 900px; height: 500px"></div>

<div>
</body>




</html>
